<!DOCTYPE html>
<script src="./js/statistic.js"></script>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>KSM Education - Jurnal Ilmiah Pendidikan Islam</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./styles/admin.css" />
    <link rel="shortcut icon" type="image/x-icon" href="./assets/favicon.ico" />
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
      /* Additional styles for dual login buttons */
      .auth-section {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .btn-user-login,
      .btn-register {
        padding: 10px 20px;
        background: #2c3e50;
        color: white;
        border: none;
        border-radius: 6px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .btn-user-login:hover,
      .btn-register:hover {
        background: #34495e;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      }

      .btn-user-login:active,
      .btn-register:active {
        transform: translateY(0);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      /* Icon styling */
      .btn-user-login svg,
      .btn-register svg {
        width: 16px;
        height: 16px;
      }

      /* Responsive untuk mobile */
      @media (max-width: 768px) {
        .auth-section {
          flex-direction: column;
          gap: 10px;
        }

        .btn-user-login,
        .btn-register {
          width: 100%;
          justify-content: center;
          padding: 12px 20px;
        }

        .search-box {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header>
      <div class="header-container">
        <div class="logo">
          <a href="#"><img src="./assets/main_logo.png" alt="Logo" /></a>
          <!-- <span class="logo-text">KSM EDUCATION</span> -->
        </div>
        <nav class="active">
          <a href="#">HOME</a>

          <div class="nav-dropdown">
            <button class="nav-link has-caret" type="button">
              JURNAL
              <svg
                class="caret"
                viewBox="0 0 24 24"
                width="16"
                height="16"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
            <div class="dropdown-menu">
              <a href="journals.html">Semua Jurnal</a>
              <a href="journals.html#search">Cari Jurnal</a>
            </div>
          </div>

          <a href="#upload">UPLOAD</a>
        </nav>
        <div class="auth-section">
          <a href="./login_user.html" class="btn-user-login">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
            USER
          </a>
          <a href="#" class="btn-register">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
              <path d="M2 17l10 5 10-5"></path>
              <path d="M2 12l10 5 10-5"></path>
            </svg>
            ADMIN
          </a>
          <div class="search-box">
            <i id="icon-search" data-feather="search"></i>
            <input type="text" placeholder="cari jurnal..." />
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <!-- Statistics Section -->
      <section class="statistics">
        <h2>STATISTIK</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i id="bar-chart-2" data-feather="bar-chart-2"></i>
            </div>
            <div class="stat-number" id="articleCount">0</div>
            <div class="stat-label">Artikel</div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i id="eye" data-feather="eye"></i>
            </div>
            <div class="stat-number" id="visitorCount">0</div>
            <div class="stat-label">Pengunjung</div>
          </div>
        </div>
      </section>

      <!-- Journal List Section -->
      <section id="journal" class="journal-list">
        <h2>DAFTAR JURNAL</h2>
        <div id="journalContainer">
          <!-- Journal items will be generated by JavaScript -->
        </div>

        <!-- View All Button -->
        <div
          id="viewAllContainer"
          class="view-all-container"
          style="display: none"
        >
          <a href="./journals.html" class="btn-view-all">
            <i data-feather="arrow-right"></i>
            Lihat Semua Jurnal
          </a>
        </div>
      </section>

      <!-- Upload Section -->
      <section id="upload" class="upload-section">
        <h2>UPLOAD JURNAL</h2>

        <!-- Document Upload -->
        <div class="document-upload-section">
          <h3>Upload File Jurnal (PDF/Word)</h3>
          <div id="dropZone" class="drop-zone">
            <div class="upload-icon">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"
                />
              </svg>
            </div>
            <p class="upload-text">
              Drag and Drop atau
              <span class="browse-link">klik untuk upload</span>
            </p>
            <p class="upload-subtext">Format: PDF, DOC, DOCX (Max 10MB)</p>
            <input
              type="file"
              id="fileInput"
              accept=".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
              hidden
            />
          </div>

          <!-- Cover Image Upload -->
          <div class="cover-upload-section">
            <h3>Upload Cover Jurnal</h3>
            <div id="coverDropZone" class="cover-drop-zone">
              <div class="upload-icon">
                <svg fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"
                  />
                </svg>
              </div>
              <p class="upload-text">
                Drag and Drop atau
                <span class="browse-link">klik untuk upload</span>
              </p>
              <p class="upload-subtext">Format: JPG, PNG, GIF (Max 2MB)</p>
              <input
                type="file"
                id="coverInput"
                accept="image/jpeg,image/png,image/gif,.jpg,.jpeg,.png,.gif"
                hidden
              />
            </div>

            <!-- Cover Preview -->
            <div id="coverPreview" class="cover-preview" style="display: none">
              <img id="coverImage" src="" alt="Cover Preview" />
              <button type="button" class="remove-cover-btn" id="removeCover">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                  />
                </svg>
              </button>
            </div>
          </div>

          <!-- File Preview -->
          <div id="filePreview" class="file-preview" style="display: none">
            <div class="file-info">
              <svg class="file-icon" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6zm4 18H6V4h7v5h5v11z"
                />
              </svg>
              <div class="file-details">
                <div class="file-name" id="fileName"></div>
                <div class="file-size" id="fileSize"></div>
              </div>
              <button type="button" class="remove-file-btn" id="removeFile">
                <svg viewBox="0 0 24 24" fill="currentColor">
                  <path
                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
                  />
                </svg>
              </button>
            </div>
            <div
              class="upload-progress"
              id="uploadProgress"
              style="display: none"
            >
              <div class="progress-bar" id="progressBar"></div>
              <div class="progress-text" id="progressText">0%</div>
            </div>
          </div>
        </div>

        <!-- Form Data Jurnal -->
        <form id="uploadForm">
          <div class="form-group">
            <label for="judulJurnal">Judul Jurnal<span>*</span></label>
            <input type="text" id="judulJurnal" required />
          </div>

          <!-- Multiple Authors Section -->
          <div class="form-group">
            <label>Nama Penulis<span>*</span></label>
            <div id="authorsContainer">
              <!-- First author input (required) -->
              <div class="author-input-group" data-author-index="0">
                <input
                  type="text"
                  class="author-input"
                  placeholder="Nama Penulis 1"
                  required
                />
                <button
                  type="button"
                  class="btn-remove-author"
                  style="display: none"
                >
                  <i data-feather="x"></i>
                </button>
              </div>
            </div>
            <button type="button" id="addAuthorBtn" class="btn-add-author">
              <i data-feather="plus"></i>
              Tambah Penulis
            </button>
          </div>

          <div class="form-group">
            <label for="email">Email<span>*</span></label>
            <input
              type="email"
              id="email"
              placeholder="contoh@gmail.com"
              required
            />
          </div>
          <div class="form-group">
            <label for="kontak">Kontak Penulis<span>*</span></label>
            <input
              type="text"
              id="kontak"
              placeholder="Ex: 08511230139"
              style="font-style: italic"
              required
            />
          </div>
          <div class="form-group">
            <label for="abstrak">Abstrak<span>*</span></label>
            <textarea id="abstrak" required></textarea>
          </div>
          <button type="submit" class="btn-submit" id="submitBtn">
            SUBMIT
          </button>
        </form>
      </section>
    </div>

    <!-- Login Modal (Admin) -->
    <div id="loginModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content login-container">
        <button type="button" class="close-modal" id="closeLoginModal">
          <i data-feather="x"></i>
        </button>

        <div class="login-header">
          <img
            src="./assets/main_logo.png"
            alt="KSM Education Logo"
            class="login-logo"
          />
          <h2>ADMIN LOGIN</h2>
          <p style="color: #666; font-size: 14px; margin-top: 8px">
            Login sebagai Administrator
          </p>
        </div>

        <form id="loginForm" class="login-form">
          <div class="form-group">
            <input
              type="email"
              id="loginEmail"
              placeholder="Masukan Email Admin"
              required
            />
          </div>

          <div class="form-group password-group">
            <input
              type="password"
              id="loginPassword"
              placeholder="Masukan Password"
              required
            />
            <button type="button" class="toggle-password" id="togglePassword">
              <i data-feather="eye"></i>
            </button>
          </div>

          <div class="form-options">
            <label class="remember-me">
              <input type="checkbox" id="rememberMe" />
              <span>Remember Me</span>
            </label>
            <a href="#" class="forgot-password">Forgot Password?</a>
          </div>

          <button type="submit" class="btn-login">MASUK</button>
        </form>
      </div>
    </div>

    <!-- Edit Journal Modal -->
    <div id="editModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content edit-container">
        <button type="button" class="close-modal" id="closeEditModal">
          <i data-feather="x"></i>
        </button>

        <div class="edit-header">
          <h2>EDIT JURNAL</h2>
        </div>

        <form id="editForm" class="edit-form">
          <input type="hidden" id="editJournalId" />

          <div class="form-group">
            <label for="editJudulJurnal">Judul Jurnal<span>*</span></label>
            <input type="text" id="editJudulJurnal" required />
          </div>

          <div class="form-group">
            <label>Nama Penulis<span>*</span></label>
            <div id="editAuthorsContainer">
              <!-- Authors will be populated dynamically -->
            </div>
            <button type="button" id="editAddAuthorBtn" class="btn-add-author">
              <i data-feather="plus"></i>
              Tambah Penulis
            </button>
          </div>

          <div class="form-group">
            <label for="editEmail">Email<span>*</span></label>
            <input type="email" id="editEmail" required />
          </div>

          <div class="form-group">
            <label for="editKontak">Kontak Penulis<span>*</span></label>
            <input type="text" id="editKontak" required />
          </div>

          <div class="form-group">
            <label for="editAbstrak">Abstrak<span>*</span></label>
            <textarea id="editAbstrak" required></textarea>
          </div>

          <div class="edit-actions">
            <button type="button" class="btn-cancel" id="cancelEdit">
              BATAL
            </button>
            <button type="submit" class="btn-save">SIMPAN</button>
          </div>
        </form>
      </div>
    </div>

    <!-- Journal Preview Modal -->
    <div id="previewModal" class="modal">
      <div class="modal-overlay"></div>
      <div class="modal-content preview-container">
        <button type="button" class="close-modal" id="closePreviewModal">
          <i data-feather="x"></i>
        </button>

        <div class="preview-header">
          <div class="preview-meta">
            <h3 id="previewTitle">Judul Jurnal</h3>
            <p id="previewInfo">Tanggal â€¢ Penulis</p>
          </div>
          <div class="preview-actions"></div>
        </div>

        <div class="preview-body" id="previewBody">
          <!-- Dinamis: iframe PDF / img / fallback -->
        </div>
      </div>
    </div>

    <script src="./js/script.js"></script>
    <script src="./js/statistic.js"></script>
    <script src="./js/file_upload.js"></script>
    <script src="./js/jurnal.js"></script>
    <script src="./js/login.js"></script>
    <script src="./js/form_handler.js"></script>
    <script src="./js/pagination.js"></script>
  </body>
</html>
